<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ùêù : ·¥õ·¥è·¥Ö·¥è</title>
  <link rel="icon" href="./favi.ico" type="image/x-icon" />
  <style>
    :root {
      --today-color: #000;
      --primary-color: #3498db;
      --sidebar-width: 250px;
      --border-radius: 8px;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'HJSS', sans-serif;
      background: #f5f5f5;
      box-sizing: border-box;
    }
    *, *::before, *::after {
      box-sizing: inherit;
    }
    #app {
      max-width: 800px;
      margin: auto;
      padding: 1rem;
      background: #fff;
      min-height: 100vh;
      position: relative;
      transition: margin-left 0.3s;
    }
    .with-sidebar {
      margin-left: var(--sidebar-width) !important;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .day {
      padding: 0.5rem;
      text-align: center;
      cursor: pointer;
      border-radius: var(--border-radius);
      transition: background-color 0.2s;
    }
    .day:hover:not(.empty) {
      background-color: #eee;
    }
    .day-header {
      font-weight: bold;
      padding: 0.5rem;
      text-align: center;
    }
    .sat { color: #7192C8; }
    .sun { color: #C87171; }
    .today { 
      background: var(--today-color); 
      color: #fff; 
      border-radius: var(--border-radius);
    }
    .selected-day {
      border: 2px solid var(--today-color);
      border-radius: var(--border-radius);
    }
    .controls button {
      background: #fff;
      border: 1px solid #ccc;
      padding: 0.5rem 0.8rem;
      cursor: pointer;
      margin: 0 0.25rem;
      border-radius: var(--border-radius);
      transition: background-color 0.2s;
    }
    .controls button:hover {
      background-color: #f0f0f0;
    }
    .quotes-input {
      width: 100%;
      margin-top: 1rem;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      resize: vertical;
      min-height: 80px;
      font-family: inherit;
      transition: border-color 0.2s;
    }
    .quotes-input:focus {
      outline: none;
      border-color: var(--today-color);
    }
    .quotes-input[readonly] {
      font-weight: bold;
      color: var(--today-color);
      cursor: pointer;
      background-color: #f9f9f9;
    }
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100%;
      width: var(--sidebar-width);
      background: #2c3e50;
      color: white;
      padding: 1rem;
      z-index: 1000;
      transform: translateX(-100%);
      transition: transform 0.3s;
    }
    .sidebar.active {
      transform: translateX(0);
    }
    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    .sidebar-title {
      font-size: 1.2rem;
      font-weight: bold;
    }
    .close-sidebar {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .sidebar button.nav-btn {
      display: block;
      width: 100%;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      padding: 0.8rem;
      margin-bottom: 1rem;
      text-align: left;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .sidebar button.nav-btn:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    .menu-toggle {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem;
    }
    .quotes-page .card {
      border: 1px solid #ddd;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: var(--border-radius);
      background: #fff;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .quotes-page .card-date {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    .quotes-page .card-content {
      color: var(--today-color);
    }
    .todo-section {
      margin-top: 2rem;
    }
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .todo-list {
      margin-top: 1rem;
    }
    .todo-item {
      display: flex;
      align-items: center;
      padding: 0.8rem;
      border-bottom: 1px solid #eee;
      border-radius: var(--border-radius);
      background: #fff;
      transition: background-color 0.2s;
      margin-bottom: 0.5rem;
    }
    .todo-item:hover {
      background-color: #f9f9f9;
    }
    .todo-checkbox {
      margin-right: 0.8rem;
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    .todo-text {
      flex-grow: 1;
      user-select: none;
    }
    .todo-item.done .todo-text {
      text-decoration: line-through;
      color: #999;
    }
    .todo-actions {
      display: flex;
      gap: 0.5rem;
    }
    .todo-btn {
      background: none;
      border: none;
      cursor: pointer;
      opacity: 0.6;
      transition: opacity 0.2s;
      font-size: 1rem;
    }
    .todo-btn:hover {
      opacity: 1;
    }
    .add-todo {
      display: flex;
      margin-bottom: 1rem;
    }
    .add-todo input {
      flex-grow: 1;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: var(--border-radius) 0 0 var(--border-radius);
      font-family: inherit;
    }
    .add-todo input:focus {
      outline: none;
      border-color: var(--today-color);
    }
    .add-todo button {
      padding: 0.8rem 1.2rem;
      background: var(--today-color);
      color: white;
      border: none;
      border-radius: 0 var(--border-radius) var(--border-radius) 0;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .add-todo button:hover {
      opacity: 0.9;
    }
    .export-btn {
      display: block;
      width: 100%;
      padding: 0.8rem;
      background: var(--today-color);
      color: white;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      margin-top: 2rem;
      transition: opacity 0.2s;
    }
    .export-btn:hover {
      opacity: 0.9;
    }
    .notification-settings {
      margin-top: 1rem;
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
    }
    .notification-toggle {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    .notification-toggle label {
      margin-left: 0.5rem;
    }
    .date-selector {
      margin-top: 0.5rem;
    }
    .date-selector input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
    }
    .deadline-picker {
      display: flex;
      align-items: center;
      margin-top: 0.5rem;
    }
    .deadline-picker input {
      flex-grow: 1;
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      margin-right: 0.5rem;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 999;
      display: none;
    }
    .overlay.active {
      display: block;
    }
    
    /* Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
    @media (max-width: 768px) {
      #app {
        padding: 0.5rem;
      }
      .with-sidebar {
        margin-left: 0 !important;
      }
      .calendar {
        gap: 0.25rem;
      }
      .day {
        padding: 0.4rem;
        font-size: 0.9rem;
      }
      .todo-item {
        padding: 0.6rem;
      }
      .add-todo input,
      .add-todo button {
        padding: 0.6rem;
      }
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script src="https://unpkg.com/react/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://unpkg.com/babel-standalone/babel.min.js"></script>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ÏöîÏùº Ìó§Îçî Ïª¥Ìè¨ÎÑåÌä∏
    const DayHeader = () => {
      const days = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
      return days.map((day, index) => (
        <div key={index} className={`day-header ${index === 0 ? 'sun' : index === 6 ? 'sat' : ''}`}>
          {day}
        </div>
      ));
    };

    // Ï∫òÎ¶∞Îçî Ïª¥Ìè¨ÎÑåÌä∏
    const Calendar = ({ date, selectedDate, onDateSelect }) => {
      const renderCalendar = () => {
        const year = date.getFullYear();
        const month = date.getMonth();
        const firstDay = new Date(year, month, 1).getDay();
        const days = [];
        
        // Ïù¥Ï†Ñ Îã¨Ïùò ÎßàÏßÄÎßâ ÎÇ†ÏßúÎì§
        const prevMonthLastDate = new Date(year, month, 0).getDate();
        for (let i = 0; i < firstDay; i++) {
          days.push({ 
            date: new Date(year, month-1, prevMonthLastDate - firstDay + i + 1), 
            currentMonth: false 
          });
        }
        
        // ÌòÑÏû¨ Îã¨Ïùò ÎÇ†ÏßúÎì§
        const lastDate = new Date(year, month + 1, 0).getDate();
        for (let d = 1; d <= lastDate; d++) {
          days.push({ 
            date: new Date(year, month, d), 
            currentMonth: true 
          });
        }
        
        // Îã§Ïùå Îã¨Ïùò Ï≤´ ÎÇ†ÏßúÎì§ (Ï∫òÎ¶∞ÎçîÎ•º Ï±ÑÏö∞Í∏∞ ÏúÑÌï¥)
        const remainingDays = 7 - (days.length % 7);
        if (remainingDays < 7) {
          for (let d = 1; d <= remainingDays; d++) {
            days.push({ 
              date: new Date(year, month+1, d), 
              currentMonth: false 
            });
          }
        }
        
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        return days.map((dayObj, i) => {
          const d = dayObj.date;
          const isToday = d.toDateString() === today.toDateString();
          const isSelected = selectedDate && d.toDateString() === selectedDate.toDateString();
          const dayClass = `day 
            ${!dayObj.currentMonth ? 'empty' : ''} 
            ${d.getDay() === 0 ? 'sun' : ''} 
            ${d.getDay() === 6 ? 'sat' : ''} 
            ${isToday ? 'today' : ''} 
            ${isSelected && !isToday ? 'selected-day' : ''}`;
            
          return (
            <div 
              key={i} 
              className={dayClass}
              onClick={() => dayObj.currentMonth && onDateSelect(d)}
              style={{ opacity: dayObj.currentMonth ? 1 : 0.3 }}
            >
              {d.getDate()}
            </div>
          );
        });
      };

      return (
        <>
          <DayHeader />
          {renderCalendar()}
        </>
      );
    };

    // Todo Ìï≠Î™© Ïª¥Ìè¨ÎÑåÌä∏
    const TodoItem = ({ todo, onToggle, onDelete, onEditDeadline }) => {
      const [showDeadlinePicker, setShowDeadlinePicker] = useState(false);
      const [deadline, setDeadline] = useState(todo.deadline || '');
      
      const handleDeadlineChange = (e) => {
        setDeadline(e.target.value);
      };
      
      const saveDeadline = () => {
        onEditDeadline(todo.id, deadline);
        setShowDeadlinePicker(false);
      };
      
      const formatDeadline = (deadline) => {
        if (!deadline) return '';
        const date = new Date(deadline);
        return date.toLocaleDateString('ko-KR');
      };
      
      return (
        <div className={`todo-item ${todo.done ? 'done' : ''}`}>
          <input 
            type="checkbox" 
            className="todo-checkbox" 
            checked={todo.done}
            onChange={() => onToggle(todo.id)}
            aria-label="ÏôÑÎ£å Ïó¨Î∂Ä"
          />
          <div className="todo-text">{todo.text}</div>
          {todo.deadline && (
            <div style={{fontSize: '0.8rem', color: '#777', marginRight: '10px'}}>
              ~{formatDeadline(todo.deadline)}
            </div>
          )}
          <div className="todo-actions">
            <button className="todo-btn" onClick={() => setShowDeadlinePicker(!showDeadlinePicker)} aria-label="ÎßàÍ∞êÏùº ÏÑ§Ï†ï">
              ‚è∞
            </button>
            <button className="todo-btn" onClick={() => onDelete(todo.id)} aria-label="ÏÇ≠Ï†ú">
              üóëÔ∏è
            </button>
          </div>
          {showDeadlinePicker && (
            <div className="deadline-picker" style={{position: 'absolute', background: 'white', padding: '10px', border: '1px solid #ddd', borderRadius: '5px', zIndex: 10}}>
              <input 
                type="date" 
                value={deadline}
                onChange={handleDeadlineChange}
              />
              <button onClick={saveDeadline}>Ï†ÄÏû•</button>
            </div>
          )}
        </div>
      );
    };

    // Î©îÏù∏ Ïï± Ïª¥Ìè¨ÎÑåÌä∏
    function App() {
      const [view, setView] = useState('todo');
      const [date, setDate] = useState(new Date());
      const [selectedDate, setSelectedDate] = useState(new Date());
      const [quotes, setQuotes] = useState(JSON.parse(localStorage.getItem('quotes') || '{}'));
      const [todosData, setTodosData] = useState(JSON.parse(localStorage.getItem('todos') || '{}'));
      const [quoteEditing, setQuoteEditing] = useState(false);
      const [quoteText, setQuoteText] = useState('');
      const [newTodo, setNewTodo] = useState('');
      const [sidebarActive, setSidebarActive] = useState(false);
      const [notificationsEnabled, setNotificationsEnabled] = useState(false);
      const appRef = useRef();

      // ÏÑ†ÌÉùÎêú ÎÇ†ÏßúÏùò Ìï† Ïùº Î™©Î°ù
      const selectedDateKey = selectedDate.toDateString();
      const todos = todosData[selectedDateKey] || [];

      // Ìï† Ïùº Î™©Î°ù Î∂àÎü¨Ïò§Í∏∞
      useEffect(() => {
        const savedTodos = JSON.parse(localStorage.getItem('todos') || '{}');
        setTodosData(savedTodos);
      }, []);

      // ÏÑ†ÌÉùÎêú ÎÇ†ÏßúÍ∞Ä Î≥ÄÍ≤ΩÎê† Îïå Ìï¥Îãπ ÎÇ†ÏßúÏùò Î©îÎ™® Î∂àÎü¨Ïò§Í∏∞
      useEffect(() => {
        const savedQuote = quotes[selectedDateKey] || '';
        setQuoteText(savedQuote);
      }, [selectedDate, quotes]);

      // Ïò§Îäò ÎÇ†Ïßú ÏÉâÏÉÅ ÏÑ§Ï†ï
      useEffect(() => {
        const savedColor = localStorage.getItem('todayColor') || '#000';
        document.documentElement.style.setProperty('--today-color', savedColor);
      }, []);

      // ÏïåÎ¶º Í∂åÌïú ÏöîÏ≤≠
      useEffect(() => {
        if (notificationsEnabled && 'Notification' in window) {
          Notification.requestPermission();
        }
      }, [notificationsEnabled]);

      // ÏïåÎ¶º Ï≤¥ÌÅ¨
      useEffect(() => {
        if (notificationsEnabled && 'Notification' in window) {
          const checkDeadlines = () => {
            const now = new Date();
            Object.entries(todosData).forEach(([dateKey, dateTodos]) => {
              dateTodos.forEach(todo => {
                if (todo.deadline && !todo.notified) {
                  const deadlineDate = new Date(todo.deadline);
                  // ÎßàÍ∞ê 30Î∂Ñ Ï†Ñ ÏïåÎ¶º
                  const timeDiff = deadlineDate - now;
                  if (timeDiff > 0 && timeDiff <= 30 * 60 * 1000) {
                    new Notification('Ìï† Ïùº ÎßàÍ∞ê ÏûÑÎ∞ï', {
                      body: `"${todo.text}" ÎßàÍ∞êÍπåÏßÄ 30Î∂Ñ Ïù¥ÎÇ¥ ÎÇ®ÏïòÏäµÎãàÎã§.`,
                      icon: './favi.ico'
                    });
                    
                    // ÏïåÎ¶º ÌëúÏãú ÌõÑ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                    const updatedTodosData = {...todosData};
                    const todoIndex = updatedTodosData[dateKey].findIndex(t => t.id === todo.id);
                    if (todoIndex !== -1) {
                      updatedTodosData[dateKey][todoIndex].notified = true;
                      setTodosData(updatedTodosData);
                      localStorage.setItem('todos', JSON.stringify(updatedTodosData));
                    }
                  }
                }
              });
            });
          };
          
          const intervalId = setInterval(checkDeadlines, 60000); // 1Î∂ÑÎßàÎã§ Ï≤¥ÌÅ¨
          return () => clearInterval(intervalId);
        }
      }, [notificationsEnabled, todosData]);

      // Ï∫òÎ¶∞Îçî Ïù¥Îèô Ìï®Ïàò
      function prevMonth() {
        setDate(new Date(date.getFullYear(), date.getMonth() - 1, 1));
      }
      
      function nextMonth() {
        setDate(new Date(date.getFullYear(), date.getMonth() + 1, 1));
      }
      
      function goToday() {
        const today = new Date();
        setDate(today);
        setSelectedDate(today);
      }

      // Î©îÎ™® Ï†ÄÏû• Ìï®Ïàò
      function saveQuote() {
        const updatedQuotes = { ...quotes, [selectedDateKey]: quoteText };
        setQuotes(updatedQuotes);
        localStorage.setItem('quotes', JSON.stringify(updatedQuotes));
        setQuoteEditing(false);
      }

      // ÏÉâÏÉÅ Î≥ÄÍ≤Ω Ìï®Ïàò
      function handleColorChange(e) {
        const color = e.target.value;
        document.documentElement.style.setProperty('--today-color', color);
        localStorage.setItem('todayColor', color);
      }

      // Todo Ìï≠Î™© Ï∂îÍ∞Ä Ìï®Ïàò
      function addTodo(e) {
        e.preventDefault();
        if (!newTodo.trim()) return;
        
        const todo = {
          id: Date.now(),
          text: newTodo,
          done: false,
          createdAt: new Date().toISOString(),
        };
        
        const dateKey = selectedDate.toDateString();
        const updatedTodos = { 
          ...todosData,
          [dateKey]: [...(todosData[dateKey] || []), todo]
        };
        
        setTodosData(updatedTodos);
        localStorage.setItem('todos', JSON.stringify(updatedTodos));
        setNewTodo('');
      }

      // Todo ÏôÑÎ£å ÏÉÅÌÉú ÌÜ†Í∏Ä Ìï®Ïàò
      function toggleTodo(id) {
        const dateKey = selectedDate.toDateString();
        const updatedTodos = { ...todosData };
        
        if (updatedTodos[dateKey]) {
          const todoIndex = updatedTodos[dateKey].findIndex(todo => todo.id === id);
          if (todoIndex !== -1) {
            updatedTodos[dateKey][todoIndex].done = !updatedTodos[dateKey][todoIndex].done;
            setTodosData(updatedTodos);
            localStorage.setItem('todos', JSON.stringify(updatedTodos));
          }
        }
      }

      // Todo Ìï≠Î™© ÏÇ≠Ï†ú Ìï®Ïàò
      function deleteTodo(id) {
        const dateKey = selectedDate.toDateString();
        const updatedTodos = { ...todosData };
        
        if (updatedTodos[dateKey]) {
          updatedTodos[dateKey] = updatedTodos[dateKey].filter(todo => todo.id !== id);
          setTodosData(updatedTodos);
          localStorage.setItem('todos', JSON.stringify(updatedTodos));
        }
      }

      // Todo ÎßàÍ∞êÏùº ÏÑ§Ï†ï Ìï®Ïàò
      function editTodoDeadline(id, deadline) {
        const dateKey = selectedDate.toDateString();
        const updatedTodos = { ...todosData };
        
        if (updatedTodos[dateKey]) {
          const todoIndex = updatedTodos[dateKey].findIndex(todo => todo.id === id);
          if (todoIndex !== -1) {
            updatedTodos[dateKey][todoIndex].deadline = deadline;
            updatedTodos[dateKey][todoIndex].notified = false; // ÎßàÍ∞êÏùº Î≥ÄÍ≤ΩÏãú ÏïåÎ¶º ÏÉÅÌÉú Î¶¨ÏÖã
            setTodosData(updatedTodos);
            localStorage.setItem('todos', JSON.stringify(updatedTodos));
          }
        }
      }

      // Ïù¥ÎØ∏ÏßÄÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞ Ìï®Ïàò
      function exportImage() {
        html2canvas(appRef.current, { backgroundColor: '#fff' }).then(canvas => {
          canvas.toBlob(blob => {
            navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })]).catch(() => {
              const link = document.createElement('a');
              link.download = `todo_${selectedDate.toLocaleDateString('ko-KR').replace(/\./g, '')}.png`;
              link.href = canvas.toDataURL();
              link.click();
            });
          });
        });
      }

      // ÏÇ¨Ïù¥ÎìúÎ∞î ÌÜ†Í∏Ä Ìï®Ïàò
      function toggleSidebar() {
        setSidebarActive(!sidebarActive);
      }

      // KST ÎÇ†Ïßú ÌëúÏãú
      const kstDate = new Date(selectedDate.getTime() + 9 * 60 * 60000);

      // Quotes ÌéòÏù¥ÏßÄ Î†åÎçîÎßÅ
      if (view === 'quotes') {
        return (
          <div className="quotes-page">
            <div className="header">
              <button onClick={() => setView('todo')}>Îí§Î°ú Í∞ÄÍ∏∞</button>
              <h2>Ï†ÄÏû•Îêú Î©îÎ™® Î™©Î°ù</h2>
            </div>
            {Object.entries(quotes).length === 0 ? (
              <div className="card">Ï†ÄÏû•Îêú Î©îÎ™®Í∞Ä ÏóÜÏäµÎãàÎã§.</div>
            ) : (
              Object.entries(quotes).map(([d, q]) => {
                if (!q) return null;
                const quoteDate = new Date(d);
                return (
                  <div key={d} className="card">
                    <div className="card-date">
                      {quoteDate.toLocaleDateString('ko-KR')} ({['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†'][quoteDate.getDay()]})
                    </div>
                    <div className="card-content">{q}</div>
                  </div>
                );
              })
            )}
          </div>
        );
      }

      return (
        <>
          <div className={`overlay ${sidebarActive ? 'active' : ''}`} onClick={toggleSidebar}></div>
          <div ref={appRef} id="app" className={sidebarActive ? 'with-sidebar' : ''}>
            <div className="header">
              <button className="menu-toggle" onClick={toggleSidebar} aria-label="Î©îÎâ¥">
                ‚ò∞
              </button>
              <div className="controls">
                <button onClick={prevMonth} aria-label="Ïù¥Ï†Ñ Îã¨">‚óÄ</button>
                <button onClick={goToday}>Ïò§Îäò</button>
                <button onClick={nextMonth} aria-label="Îã§Ïùå Îã¨">‚ñ∂</button>
              </div>
              <div>
                {date.getFullYear()}ÎÖÑ {date.getMonth() + 1}Ïõî
              </div>
              <input 
                type="color" 
                title="ÎÇ†Ïßú ÏÉâÏÉÅ ÏÑ†ÌÉù" 
                onChange={handleColorChange} 
                defaultValue={localStorage.getItem('todayColor') || '#000'}
              />
            </div>
            
            <div className="calendar">
              <Calendar 
                date={date} 
                selectedDate={selectedDate} 
                onDateSelect={setSelectedDate} 
              />
            </div>
            
            <div style={{marginTop: '1rem'}}>
              ÏÑ†ÌÉù ÎÇ†Ïßú: {kstDate.toLocaleDateString('ko-KR')} ({['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†'][kstDate.getDay()]})
            </div>
            
            <textarea
              className="quotes-input"
              value={quoteText}
              readOnly={!quoteEditing}
              onDoubleClick={() => setQuoteEditing(true)}
              onChange={e => setQuoteText(e.target.value)}
              onKeyDown={e => {
                if (e.key === 'Enter' && !e.shiftKey) {
                  e.preventDefault();
                  saveQuote();
                }
              }}
              onBlur={() => quoteEditing && saveQuote()}
              placeholder="Î©îÎ™®Î•º ÏûëÏÑ±ÌïòÎ†§Î©¥ ÎçîÎ∏îÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî"
              aria-label="Î©îÎ™®"
            />
            
            <div className="todo-section">
              <div className="section-header">
                <h3>Ìï† Ïùº Î™©Î°ù</h3>
                {notificationsEnabled && (
                  <div>üîî ÏïåÎ¶º ÌôúÏÑ±ÌôîÎê®</div>
                )}
              </div>
              
              <form className="add-todo" onSubmit={addTodo}>
                <input
                  type="text"
                  value={newTodo}
                  onChange={e => setNewTodo(e.target.value)}
                  placeholder="ÏÉà Ìï† Ïùº Ï∂îÍ∞Ä..."
                  aria-label="ÏÉà Ìï† Ïùº"
                />
                <button type="submit" aria-label="Ï∂îÍ∞Ä">Ï∂îÍ∞Ä</button>
              </form>
              
              <div className="todo-list">
                {todos.length === 0 ? (
                  <div style={{textAlign: 'center', color: '#999', padding: '1rem'}}>
                    Ìï† ÏùºÏù¥ ÏóÜÏäµÎãàÎã§. ÏÉàÎ°úÏö¥ Ìï† ÏùºÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî!
                  </div>
                ) : (
                  todos.map(todo => (
                    <TodoItem
                      key={todo.id}
                      todo={todo}
                      onToggle={toggleTodo}
                      onDelete={deleteTodo}
                      onEditDeadline={editTodoDeadline}
                    />
                  ))
                )}
              </div>
              
              <div className="notification-settings">
                <div className="notification-toggle">
                  <input
                    type="checkbox"
                    id="enable-notifications"
                    checked={notificationsEnabled}
                    onChange={() => setNotificationsEnabled(!notificationsEnabled)}
                  />
                  <label htmlFor="enable-notifications">ÎßàÍ∞êÏùº ÏïåÎ¶º ÌôúÏÑ±Ìôî</label>
                </div>
